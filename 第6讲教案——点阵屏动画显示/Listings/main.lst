C51 COMPILER V9.60.0.0   MAIN                                                              04/30/2022 06:50:07 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          /****************************************************************
   2           * 实验板：  创客海51单片机实验板，以STC89C52单片机为核心，适用于51系列单片机
   3           * 源代码：  源码经过精心调试，逐行注释，倾心录制高品质视频教程，制作PPT文档教程
   4           * 温馨提示：需要开源例程源码，请到创客海技术论坛学习、讨论、下载！
   5           * 淘宝店铺：创客海社区一号店/二号店，希望您支持，感谢您的惠顾！
   6           * 程序目的：学习点阵屏显示应用,学习idata数组定义
   7           * 函数功能: 显示一个流动ILOVEU，共阴极数码管
   8          *******************************************************************************/
   9          #include "NewStartC51.h"
  10          #include "INTRINS.h"
  11          /*******************************************************************************
  12           * 延时子函数 : Delay1ms
  13           * 函数功能      : 延时1ms
  14           *******************************************************************************/
  15          void Delay100us(unsigned int Xus) //@11.0592MHz
  16          {
  17   1          unsigned char i;
  18   1          while (Xus--)
  19   1          {
  20   2              ;
  21   2              i = 43;
  22   2              while (--i)
  23   2                  ;
  24   2          }
  25   1      }
  26          /*******************************************************************************
  27          * 点阵屏子程序  : XDisplay
  28          * 函数功能          : 列数据DisData形参，第几列Sit形参
  29          *     把每一列要显示的数据，装在数组里，整幅画面共有8列，就是8个数据
  30                                            从左边第一列开始显示，向右扫描
  31          *******************************************************************************/
  32          void XDisplay(unsigned char DisData, Sit)
  33          {
  34   1          P0 = 0xff; //关闭显示数据，消除显示余晖
  35   1          CS88 = 1;
  36   1          CS88 = 0; //锁住位码到UB（74HC573）内
  37   1      
  38   1          P0 = DisData; //送其中1列要显示的数据,
  39   1          DUAN = 1;
  40   1          DUAN = 0; //锁住数据到UA（74HC573）内
  41   1      
  42   1          P0 = ~(0x80 >> Sit); //送显示位置，列码Sit，让数据显示在第几列
  43   1          CS88 = 1;
  44   1          CS88 = 0; //锁住位码到UB（74HC573）内
  45   1      }
  46          
  47          /*******************************************************************************
  48          * 主程序    : 动画点阵屏显示程序
  49          * 函数功能      : 动态扫描点阵屏显示，调用点阵屏列显示子程序，2个形参
  50                                    从左边第一列开始显示，
  51          *       3个参数,i=画面中的列指针，Map=画面指针，Stay=画面停留时间
  52          *******************************************************************************/
  53          void main()
  54          {
C51 COMPILER V9.60.0.0   MAIN                                                              04/30/2022 06:50:07 PAGE 2   

  55   1          unsigned char idata Num[] =
  56   1          {
  57   1              0x00,  0x81,  0x81,  0xFF,  0xFF,  0x81,  0x81,  0x00,
  58   1              0x00,  0xFF,  0xFF,  0x03,  0x03,  0x03,  0x03,  0x00,
  59   1              0x00,  0x7E,  0xFF,  0xC3,  0xC3,  0xFF,  0x7E,  0x00,
  60   1              0x00,  0xFC,  0xFE,  0x03,  0x03,  0xFE,  0xFC,  0x00,
  61   1              0x00,  0xFF,  0xFF,  0xDB,  0xDB,  0xDB,  0xDB,  0x00,
  62   1              0x00,  0xFE,  0xFF,  0x03,  0x03,  0xFF,  0xFE,  0x00,
  63   1          }; //显示“ILOVEU”
  64   1      
  65   1          newstart_init();
  66   1          while (1)
  67   1          {
  68   2              unsigned char i, Map, Stay;         // Map=画面指针，Stay=动画停留时间
  69   2              for (Map = 0; Map < 40; Map++)  //修改画面指针
  70   2              {
  71   3                  for (Stay = 0; Stay < 200; Stay++) // Stay<10,画面停留时间=1ms*8*100，大概1秒
  72   3                  {
  73   4                      for (i = 0; i < 8; i++) //显示整幅动画内容，扫描8列
  74   4                      {
  75   5                          XDisplay(Num[i + Map], i); //调用子程序，i=画面中的列指针,Map=画面指针
  76   5                          Delay100us(0);                             //每一列停留时间1ms
  77   5                      }
  78   4                  }
  79   3              }
  80   2          }
  81   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    150    ----
   CONSTANT SIZE    =     48    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----      48
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
